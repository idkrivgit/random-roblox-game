<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Random Roblox Game</title>
</head>
<body>
  <script>
    async function fetchRandomGame() {
      let tries = 0;
      while (tries < 5) {
        const randomLetter = String.fromCharCode(97 + Math.floor(Math.random() * 26)); // a-z
        const randomPage = Math.floor(Math.random() * 20); // pages 0-19
        const url = `https://zingy-smakager-9fc1b7.netlify.app/.netlify/functions/proxy?keyword=${randomLetter}&startRows=${randomPage*10}&maxRows=10`;

        try {
          const response = await fetch(url);
          const data = await response.json();

          if (data.games && data.games.length > 0) {
            const game = data.games[Math.floor(Math.random() * data.games.length)];
            window.location.href = `https://www.roblox.com/games/${game.id}`;
            return;
          }
        } catch (err) {
          // just try again
        }
        tries++;
      }
      alert("Couldn't find a game after several tries, please refresh.");
    }

    fetchRandomGame();
  </script>
</body>
</html>
